<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta id="repository-name" content="github.com/veelenga/ameba">
  <link href="css/style.css" rel="stylesheet" type="text/css" />
  <script type="text/javascript" src="js/doc.js"></script>
  <title>README - github.com/veelenga/ameba</title>
</head>
<body>

<div id="types-list">
  <div id="search-box">
    <input type="search" id="search-input" placeholder="Search...">
  </div>

  <ul>
    <li class="current"><a href="index.html">README</a></li>
  </ul>

  <ul>
  
  <li class="parent " data-id="github.com/veelenga/ameba/Ameba" data-name="ameba">
      <a href="Ameba.html">Ameba</a>
      
        <ul>
  
  <li class="parent " data-id="github.com/veelenga/ameba/Ameba/AST" data-name="ameba::ast">
      <a href="Ameba/AST.html">AST</a>
      
        <ul>
  
  <li class=" " data-id="github.com/veelenga/ameba/Ameba/AST/Util" data-name="ameba::ast::util">
      <a href="Ameba/AST/Util.html">Util</a>
      
    </li>
  
  <li class=" " data-id="github.com/veelenga/ameba/Ameba/AST/Visitor" data-name="ameba::ast::visitor">
      <a href="Ameba/AST/Visitor.html">Visitor</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="github.com/veelenga/ameba/Ameba/Config" data-name="ameba::config">
      <a href="Ameba/Config.html">Config</a>
      
    </li>
  
  <li class="parent " data-id="github.com/veelenga/ameba/Ameba/Formatter" data-name="ameba::formatter">
      <a href="Ameba/Formatter.html">Formatter</a>
      
        <ul>
  
  <li class=" " data-id="github.com/veelenga/ameba/Ameba/Formatter/BaseFormatter" data-name="ameba::formatter::baseformatter">
      <a href="Ameba/Formatter/BaseFormatter.html">BaseFormatter</a>
      
    </li>
  
  <li class=" " data-id="github.com/veelenga/ameba/Ameba/Formatter/DotFormatter" data-name="ameba::formatter::dotformatter">
      <a href="Ameba/Formatter/DotFormatter.html">DotFormatter</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="github.com/veelenga/ameba/Ameba/Rule" data-name="ameba::rule">
      <a href="Ameba/Rule.html">Rule</a>
      
        <ul>
  
  <li class=" " data-id="github.com/veelenga/ameba/Ameba/Rule/Base" data-name="ameba::rule::base">
      <a href="Ameba/Rule/Base.html">Base</a>
      
    </li>
  
  <li class=" " data-id="github.com/veelenga/ameba/Ameba/Rule/ComparisonToBoolean" data-name="ameba::rule::comparisontoboolean">
      <a href="Ameba/Rule/ComparisonToBoolean.html">ComparisonToBoolean</a>
      
    </li>
  
  <li class=" " data-id="github.com/veelenga/ameba/Ameba/Rule/ConstantNames" data-name="ameba::rule::constantnames">
      <a href="Ameba/Rule/ConstantNames.html">ConstantNames</a>
      
    </li>
  
  <li class=" " data-id="github.com/veelenga/ameba/Ameba/Rule/DebuggerStatement" data-name="ameba::rule::debuggerstatement">
      <a href="Ameba/Rule/DebuggerStatement.html">DebuggerStatement</a>
      
    </li>
  
  <li class=" " data-id="github.com/veelenga/ameba/Ameba/Rule/DuplicatedWhen" data-name="ameba::rule::duplicatedwhen">
      <a href="Ameba/Rule/DuplicatedWhen.html">DuplicatedWhen</a>
      
    </li>
  
  <li class=" " data-id="github.com/veelenga/ameba/Ameba/Rule/EmptyEnsure" data-name="ameba::rule::emptyensure">
      <a href="Ameba/Rule/EmptyEnsure.html">EmptyEnsure</a>
      
    </li>
  
  <li class=" " data-id="github.com/veelenga/ameba/Ameba/Rule/EmptyExpression" data-name="ameba::rule::emptyexpression">
      <a href="Ameba/Rule/EmptyExpression.html">EmptyExpression</a>
      
    </li>
  
  <li class=" " data-id="github.com/veelenga/ameba/Ameba/Rule/HashDuplicatedKey" data-name="ameba::rule::hashduplicatedkey">
      <a href="Ameba/Rule/HashDuplicatedKey.html">HashDuplicatedKey</a>
      
    </li>
  
  <li class=" " data-id="github.com/veelenga/ameba/Ameba/Rule/LargeNumbers" data-name="ameba::rule::largenumbers">
      <a href="Ameba/Rule/LargeNumbers.html">LargeNumbers</a>
      
    </li>
  
  <li class=" " data-id="github.com/veelenga/ameba/Ameba/Rule/LineLength" data-name="ameba::rule::linelength">
      <a href="Ameba/Rule/LineLength.html">LineLength</a>
      
    </li>
  
  <li class=" " data-id="github.com/veelenga/ameba/Ameba/Rule/LiteralInCondition" data-name="ameba::rule::literalincondition">
      <a href="Ameba/Rule/LiteralInCondition.html">LiteralInCondition</a>
      
    </li>
  
  <li class=" " data-id="github.com/veelenga/ameba/Ameba/Rule/LiteralInInterpolation" data-name="ameba::rule::literalininterpolation">
      <a href="Ameba/Rule/LiteralInInterpolation.html">LiteralInInterpolation</a>
      
    </li>
  
  <li class=" " data-id="github.com/veelenga/ameba/Ameba/Rule/MethodNames" data-name="ameba::rule::methodnames">
      <a href="Ameba/Rule/MethodNames.html">MethodNames</a>
      
    </li>
  
  <li class=" " data-id="github.com/veelenga/ameba/Ameba/Rule/NegatedConditionsInUnless" data-name="ameba::rule::negatedconditionsinunless">
      <a href="Ameba/Rule/NegatedConditionsInUnless.html">NegatedConditionsInUnless</a>
      
    </li>
  
  <li class=" " data-id="github.com/veelenga/ameba/Ameba/Rule/PercentArrays" data-name="ameba::rule::percentarrays">
      <a href="Ameba/Rule/PercentArrays.html">PercentArrays</a>
      
    </li>
  
  <li class=" " data-id="github.com/veelenga/ameba/Ameba/Rule/PredicateName" data-name="ameba::rule::predicatename">
      <a href="Ameba/Rule/PredicateName.html">PredicateName</a>
      
    </li>
  
  <li class=" " data-id="github.com/veelenga/ameba/Ameba/Rule/RedundantBegin" data-name="ameba::rule::redundantbegin">
      <a href="Ameba/Rule/RedundantBegin.html">RedundantBegin</a>
      
    </li>
  
  <li class=" " data-id="github.com/veelenga/ameba/Ameba/Rule/TrailingBlankLines" data-name="ameba::rule::trailingblanklines">
      <a href="Ameba/Rule/TrailingBlankLines.html">TrailingBlankLines</a>
      
    </li>
  
  <li class=" " data-id="github.com/veelenga/ameba/Ameba/Rule/TrailingWhitespace" data-name="ameba::rule::trailingwhitespace">
      <a href="Ameba/Rule/TrailingWhitespace.html">TrailingWhitespace</a>
      
    </li>
  
  <li class=" " data-id="github.com/veelenga/ameba/Ameba/Rule/TypeNames" data-name="ameba::rule::typenames">
      <a href="Ameba/Rule/TypeNames.html">TypeNames</a>
      
    </li>
  
  <li class=" " data-id="github.com/veelenga/ameba/Ameba/Rule/UnlessElse" data-name="ameba::rule::unlesselse">
      <a href="Ameba/Rule/UnlessElse.html">UnlessElse</a>
      
    </li>
  
  <li class=" " data-id="github.com/veelenga/ameba/Ameba/Rule/VariableNames" data-name="ameba::rule::variablenames">
      <a href="Ameba/Rule/VariableNames.html">VariableNames</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="github.com/veelenga/ameba/Ameba/Runner" data-name="ameba::runner">
      <a href="Ameba/Runner.html">Runner</a>
      
    </li>
  
  <li class="parent " data-id="github.com/veelenga/ameba/Ameba/Source" data-name="ameba::source">
      <a href="Ameba/Source.html">Source</a>
      
        <ul>
  
  <li class=" " data-id="github.com/veelenga/ameba/Ameba/Source/Error" data-name="ameba::source::error">
      <a href="Ameba/Source/Error.html">Error</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="github.com/veelenga/ameba/Ameba/Tokenizer" data-name="ameba::tokenizer">
      <a href="Ameba/Tokenizer.html">Tokenizer</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

</div>

<div id="main-content">
<h2>About</h2>

<p>Ameba is a static code analysis tool for the Crystal language.
It enforces a consistent <a href="https://crystal-lang.org/docs/conventions/coding_style.html" target="_blank">Crystal code style</a>,
also catches code smells and wrong code constructions.</p>

<h2>How it works</h2>

<p>Ameba's <em>"fingerlike projections"</em> are <a href="src/ameba/rule/" target="_blank">rules</a>. Each rule makes the inspection for that or
another problem in the source code. Currently rules are able to:</p>

<ul><li>[x] simply validate lines of source code</li><li>[x] traverse AST using <a href="https://github.com/crystal-lang/crystal/blob/1f3e8b0e742b55c1feb5584dc932e87034365f48/src/compiler/crystal/syntax/visitor.cr" target="_blank"><code>Crystal::Visitor</code></a></li><li>[x] tokenize sources using <a href="https://github.com/crystal-lang/crystal/blob/1f3e8b0e742b55c1feb5584dc932e87034365f48/src/compiler/crystal/syntax/lexer.cr" target="_blank"><code>Crystal::Lexer</code></a> and iterate through tokens</li><li>[ ] do semantics analysis using <a href="https://github.com/crystal-lang/crystal/blob/master/src/compiler/crystal/semantic/semantic_visitor.cr" target="_blank"><code>Crystal::SemanticVisitor</code></a></li></ul>

<h2>Installation</h2>

<h3>As a project dependency:</h3>

<p>Add this to your application's <code>shard.yml</code>:</p>

<pre><code class='language-yaml'>development_dependencies:
  ameba:
    github: veelenga/ameba</code></pre>

<p>Build <code>bin/ameba</code> binary within your project directory while running <code>crystal deps</code>.</p>

<p>You may also want to use it on <a href="travis-ci.org" target="_blank">Travis</a>:</p>

<pre><code class='language-yaml'># .travis.yml
language: crystal
install:
  - crystal deps
script:
  - crystal spec
  - bin/ameba</code></pre>

<p>Using this config Ameba will inspect files just after the specs run. Travis will also fail
the build if some problems detected.</p>

<h3>OS X</h3>

<pre><code class='language-sh'>$ brew tap veelenga/tap
$ brew install ameba</code></pre>

<h3>From sources</h3>

<pre><code class='language-sh'>$ git clone https://github.com/veelenga/ameba && cd ameba
$ make install</code></pre>

<h2>Usage</h2>

<p>Run <code>ameba</code> binary within your project directory to catch code issues:</p>

<pre><code></code></pre>

<h2>Configuration</h2>

<p>Default configuration file is <code>.ameba.yml</code>.
It allows to configure or even disable specific rules.
Simply copy and adjust <a href="config/ameba.yml" target="_blank">existed sample</a>.
Each rule is enabled by default, even if you remove it from the config file.</p>

<h2>Writing a new Rule</h2>

<p>Adding a new rule is as simple as inheriting from <code><a href="Ameba/Rule.html">Ameba::Rule</a>::Base</code> struct and implementing
a logic to detect a problem in the source file:</p>

<pre><code class='language-crystal'><span class="k">struct</span> <span class="t">MySuperRule</span> <span class="o"><</span> <span class="t">Ameba</span><span class="t">::</span><span class="t">Rule</span><span class="t">::</span><span class="t">Base</span>
  <span class="c"># This is a required method to be implemented by the rule.</span>
  <span class="c"># Source will be passed here. If rule detects an issue in the source,</span>
  <span class="c"># it reports an error:</span>
  <span class="c">#</span>
  <span class="c">#   source.error rule, location, message</span>
  <span class="c">#</span>
  <span class="k">def</span> <span class="m">test</span>(source)
    <span class="c"># TODO: test source</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>

<p>As soon as a custom rule is defined, it becomes available in a full set of rules
executed by default and also can be configured via config file:</p>

<pre><code class='language-yaml'>MySuperRule:
  Enabled: false</code></pre>

<h2>Credits & inspirations</h2>

<ul><li><a href="crystal-lang.org" target="_blank">Crystal Language</a></li><li><a href="http://rubocop.readthedocs.io/en/latest/" target="_blank">Rubocop</a></li><li><a href="http://credo-ci.org/" target="_blank">Credo</a></li><li><a href="https://github.com/lpil/dogma" target="_blank">Dogma</a></li></ul>

<h2>Contributors</h2>

<ul><li><a href="https://github.com/veelenga" target="_blank">veelenga</a> Vitalii Elenhaupt - creator, maintainer</li></ul>
</div>
</body>
</html>
